<?xml version="1.0" encoding="US-ASCII"?>
<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
<?xml-stylesheet type='text/xsl' href='rfc2629.xslt' ?>
<!ENTITY RFC2119 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2119.xml">
<!ENTITY RFC2629 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.2629.xml">
<!ENTITY RFC3552 SYSTEM "http://xml.resource.org/public/rfc/bibxml/reference.RFC.3552.xml">
]>
<?rfc strict="yes" ?>
<?rfc toc="yes"?>
<?rfc tocdepth="4"?>
<?rfc symrefs="yes"?>
<?rfc sortrefs="yes" ?>
<?rfc compact="yes" ?>
<?rfc subcompact="no" ?>
<rfc category="info" docName="draft-wallstrom-dnsop-dns-delegation-requirements-00.txt" ipr="trust200902">
 	<front>
    <title abbrev="DNS Delegation Requirements">DNS Delegation Requirements</title>
   	<author fullname="Patrik Wallstrom" initials="P.W." role="editor"
   		surname="Wallstrom">
    	<organization>IIS</organization>
    	<address>
     		<postal>
     			<street></street>
     			<city>Stockholm</city>
     			<region></region>
     			<code></code>
     			<country>SE</country>
      		</postal>
     		<phone>+46 733 173 956</phone>
     		<email>pawal@iis.se</email>
    	</address>
    </author>

    <date month="September" year="2015" />

    <abstract>
    	<t>This document outlines a set of requirements on a well-behaved
    		DNS delegation of a domain name. A large number of tools has
            been developed to test DNS delegations, but all tools uses a
            different set of requirements for what is a correct setup for
            a delegated domain name. However, there are few requirements
            on how to set up DNS in order to just make the delegation work.
            In order to have a well-behaved delegation that is robust
            to failures and also make DNS resolvers behave consistently,
            there are a large number of things to consider.</t>
    	<t>Based on this document, it should be possible to set up a fully
            functional DNS delegation for a domain, but also to create a
            set of test specifications for how to test a DNS delegation.
            It is typically for testing the Basic section (TODO: add
            in-document reference) is there.
        </t>
    </abstract>
  </front>

  <middle>
    <section title="Introduction">
    	<t>The requirements are split into these different areas, to easier
    	differentiate between what they are for:</t>

    	<t><list style="numbers">
    		<t>Basic</t>
    		<t>Address</t>
    		<t>Connectivity</t>
    		<t>Consistency</t>
    		<t>Delegation</t>
    		<t>DNSSEC</t>
    		<t>Name server</t>
    		<t>Syntax</t>
    		<t>Zone</t>
    	</list></t>

        <section title="DNS Terminology">
            <t>This document tries to fully follow the DNS terminology as
                defined in <xref target="I-D.ietf-dnsop-dns-terminology"/>. 
            </t>
        </section>

    	<section title="Reserved Words">
    		<t>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL",
    		"SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
    		and "OPTIONAL" in this document are to be interpreted as
    		described in <xref target="RFC2119"/>.</t>
    	</section>

     </section>

    <section title="Basic requirements">
    	<t>The Basic requirements are fundamental to a working DNS
    		delegation. Without these properties, the rest of the
    		requirements are irrelevant.</t>

    	<section title="The domain name MUST be valid">
    		<t>The domain name MUST follow the rules defined in section 2.3.1
    		of <xref target="RFC1123"/> in order to
            be able to map the domain into a DNS packet. A domain name is
            normally valid if the name has been registered with a domain name
            registry.</t>
    	</section>

    	<section title="The domain MUST have a parent domain">
    		<t>A DNS delegation MUST have a parent domain from which it is
    		delegated. The concept of zone cuts was first described in
    		<xref target="RFC1034"/> and later clarified in section 6 of
    		<xref target="RFC2182"/>. The only exception is the root zone,
    		which do not have a parent zone.</t>
    	</section>

    	<section title="The domain MUST have at least one working name server">
            <t>A fully working DNS delegation have a parent zone delegating
            the zone to a set of child name servers. At least one name
            server MUST be able to answer DNS queries in order to be able
            to serve authoritative data for the child zone.</t>
    	</section>
    </section>

    <section title="Address requirements">
    	<t>A delegation in the public internet DNS hierarchy will use the
            globally unique address space.
        </t>
    	<section title="Name server address MUST be globally routable">
            <t>In order for the domain and its resources to be accessible,
            authoritative name servers must have addresses in the routable
            public addressing space.</t>

            <t>IANA is responsible for global coordination of the IP
            addressing system. Aside its address allocation activities,
            it maintains reserved address ranges for special uses.
            There are two IANA registries for Special-Purpose Addresses,
            the IANA IPv6 Special-Purpose Address Registry and the
            IANA IPv4 Special-Purpose Address Registry.
            </t>

            <t><xref target="RFC6890"/> instructs IANA on how to structure
            the IPv4 and IPv6 Special-Purpose Address Registries.
            The <xref target="IANAIPv4"/> and the <xref target="IANAIPv6"/>
            are maintained by IANA. These IANA registries is also described
            in <xref target="RFC7249"/> in section 2.2 and 2.3.</t>

            <t>A name server MUST NOT be using any IP address out of
            any of these registries that are marked with False in the Global
            column.</t>
    	</section>
    	<section title="IPv6 address of name server must not to be part of bogon prefix">
    	</section>
    </section>

    <section title="Connectivity requirements">
    	<t>Some text about connectivity.</t>
    	<section title="All name servers to have UDP connectivity over port 53">
    	</section>
    	<section title="All name servers to have TCP connectivity over port 53">
    	</section>
    	<section title="The name servers to not be on the same AS">
    	</section>
    </section>

    <section title="Consistency requirements">
		<t>Some text about consistency.</t>
		<section title="All name servers must respond with the same SOA serial number">
		</section>
		<section title="All name servers must respond with the same SOA RNAME">
		</section>
		<section title="All name servers must respond with the same SOA parameters">
		</section>
		<section title="All name servers must respond with the same NS RR Set">
		</section>
	</section>

    <section title="Delegation requirements">
		<t>Some text about delegations.</t>
		<section title="The delegation must contain at least two name servers">
		</section>
		<section title="The name servers must have distinct IP addresses">
		</section>
		<section title="The referral must fit into an non-truncated 512 byte UPD packet">
		</section>
		<section title="All name servers must be authoritative for the domain">
		</section>
		<section title="The delegation name must exactly match the apex of the child zone">
		</section>
		<section title="Glue records in delegation to exactly match records in child zone">
		</section>
	</section>

    <section title="DNSSEC requirements">
		<t>Some text about DNSSEC.</t>
		<section title="The DS hash digest algorithm must be one of the ones assigned by IANA">
		</section>
		<section title="The DNSKEY algorithm must be one of the ones assigned by IANA">
		</section>
		<section title="DS must match a DNSKEY in the child zone">
		</section>
		<section title="The number of NSEC3 iterations must to be higher than what is allowed">
		</section>
		<section title="RRSIG lifetimes neither must not be too short nor too long">
		</section>
		<section title="The name server must include RRSIG in all responses to DNSSEC queries">
		</section>
		<section title="If child zone includes DNSKEY then parent zone should have DS">
		</section>
		<section title="RRSIG of DNSKEY must be valid and must be created by a valid DNSKEY">
		</section>
		<section title="RRSIG of SOA must be valid and must be created by a valid DNSKEY">
		</section>
		<section title="The name servers must include valid NSEC/NSEC3 record in NXDOMAIN responses">
		</section>
		<section title="Delegation from parent to child must be properly signed">
		</section>
	</section>

    <section title="Syntax requirements">
		<t>Some text about Syntax.</t>
		<section title="No illegal characters must be in the domain name">
		</section>
		<section title="No hyphen must be at start or end of the domain name">
		</section>
		<section title="No hyphens must be in position 3 *and* 4 of the domain name">
		</section>
		<section title="The NS name must be a valid hostname">
		</section>
		<section title="The SOA RNAME must not containt the '@' character">
		</section>
		<section title="The SOA RNAME must have no illegal characters">
		</section>
		<section title="The SOA MNAME to have no illegal characters">
		</section>
		<section title="ThMX record in apex to point at a valid hostname">
		</section>
	</section>

    <section title="Zone requirements">
		<t>Some text about Zone.</t>
		<section title="SOA MNAME must be FQDN of authoritative name server">
		</section>
		<section title="SOA MNAME must be an NS of the zone">
		</section>
		<section title="SOA REFRESH should to be too low">
		</section>
		<section title="SOA RETRY must be lower than 'refresh'">
		</section>
		<section title="SOA RETRY should to be too low">
		</section>
		<section title="SOA EXPIRE should to be too low">
		</section>
		<section title="SOA 'expire' should to be lower than 'refresh'">
		</section>
		<section title="SOA 'minimum' should to be too high">
		</section>
		<section title="SOA 'minimum' should to be too low">
		</section>
		<section title="SOA MNAME must not to point at a CNAME or DNAME alias">
		</section>
		<section title="MX record must not to point at a CNAME or DNAME alias">
		</section>
		<section title="MX record should be present in apex">
		</section>
		<section title="MX record in apex must point at an A or AAAA record">
		</section>
	</section>

    <section title="Security Considerations">
        <t>This document has no security considerations.</t>
    </section>

    <section title="IANA Considerations">
        <t>This document has no IANA actions.</t>
    </section>

    <section title="Acknowledgements">
        <t>Placeholder for now.</t>
    </section>

  </middle>

  <back>
    <references title="Normative References">
  	  <?rfc include="reference.RFC.1034" ?>
  	  <?rfc include="reference.RFC.1123" ?>
  	  <?rfc include="reference.RFC.2119" ?>
  	  <?rfc include="reference.RFC.2182" ?>
      <?rfc include="reference.I-D.ietf-dnsop-dns-terminology" ?>
      <reference anchor="IANAIPv4" target="p://www.iana.org/assignments/iana-ipv4-special-registry">
        <front>
            <title>IANA IPv4 Special-Purpose Address Registry</title>
            <author>
                <organization>IANA</organization>
            </author>
            <date month="January" year="2006"/>
        </front>
      </reference>
      <reference anchor="IANAIPv6" target="p://www.iana.org/assignments/iana-ipv6-special-registry">
        <front>
            <title>IANA IPv6 Special-Purpose Address Registry</title>
            <author>
                <organization>IANA</organization>
            </author>
            <date month="January" year="2006"/>
        </front>
      </reference>
    </references>

    <references title="Informative References">
        <?rfc include="reference.RFC.6890" ?>
        <?rfc include="reference.RFC.7249" ?>
    </references>
  </back>

<!-- Change Log
v00 2015-09-18  PW    Initial version
-->

</rfc>
